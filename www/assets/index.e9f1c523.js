var ce=Object.defineProperty,de=Object.defineProperties;var me=Object.getOwnPropertyDescriptors;var Z=Object.getOwnPropertySymbols;var ue=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable;var ee=(i,a,s)=>a in i?ce(i,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[a]=s,I=(i,a)=>{for(var s in a||(a={}))ue.call(a,s)&&ee(i,s,a[s]);if(Z)for(var s of Z(a))he.call(a,s)&&ee(i,s,a[s]);return i},A=(i,a)=>de(i,me(a));import{r as n,j as e,u as O,a as r,L as xe,D as pe,M as D,B as fe,U as ge,A as ye,d as te,b as Y,S as be,T as ve,c as we,e as V,f as $,g as H,h as se,i as Ne,k as Se,l as Ce,m as K,n as Te,F as ne,o as Pe,p as Ie,q as ke,R as E,s as Ae,t as je}from"./vendor.e5fe3e61.js";const Be=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const l of t)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function s(t){const l={};return t.integrity&&(l.integrity=t.integrity),t.referrerpolicy&&(l.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?l.credentials="include":t.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(t){if(t.ep)return;t.ep=!0;const l=s(t);fetch(t.href,l)}};Be();const _=n.exports.createContext();function De(i){const[a,s]=n.exports.useState([]),[o,t]=n.exports.useState([]),[l,d]=n.exports.useState([]),[c,m]=n.exports.useState([]),x={auctionItem:a,filteredAuctionItems:o,userSellingItems:l,userBuyingItems:c,fetchAuctionItem:async h=>{let y=await fetch(`/rest/auctionItem/${h}`);y=await y.json(),s(y)},fetchFilteredAuctionItems:async h=>{h=JSON.stringify(h);let y=await fetch(`/rest/auctionItem/filtered/${h}`);y=await y.json(),t(o.length==0||h.includes('"page":0')?y:o.concat(y))},fetchUserSellingItems:async()=>{let h=await fetch("/rest/auctionItem/userSelling");h=await h.json(),d(h)},fetchUserBuyingItems:async()=>{let h=await fetch("/rest/auctionItem/userBuying");h=await h.json(),m(h)}};return e(_.Provider,{value:x,children:i.children})}const ae=n.exports.createContext();function Ee(i){const[a,s]=n.exports.useState([]),t={tags:a,fetchTags:async l=>{let d=await fetch(`/rest/tag/${l}`);d=await d.json(),s(d)}};return e(ae.Provider,{value:t,children:i.children})}const M=n.exports.createContext(),Me=({children:i})=>{const[a,s]=n.exports.useState(""),[o,t]=n.exports.useState([]),l=async()=>{let m=await fetch("/api/whoami");try{let g=await m.json();g&&s(g)}catch(g){console.log("No User yet",g)}},d=async m=>{let g=await fetch(`/rest/user/${m}`);g=await g.json(),t(g)};n.exports.useEffect(()=>{l()},[]);const c={currentUser:a,setCurrentUser:s,user:o,fetchUser:d};return e(M.Provider,{value:c,children:i})},re=n.exports.createContext();function Ge(i){const[a,s]=n.exports.useState([]),{currentUser:o}=n.exports.useContext(M);n.exports.useEffect(async()=>{o&&await t()},[o]);const t=async()=>{let m=await fetch("/rest/notification/me");m=await m.json(),s(m)},c={notifications:a,setNotifications:s,fetchMyNotifications:t,deleteNotification:async m=>{await fetch(`/rest/notification/delete/${m}`,{method:"DELETE"}),s(a.filter(g=>g.id!==m))},deleteNotifications:async m=>{m=JSON.stringify(m).replace("[","").replace("]",""),await fetch(`/rest/notification/deleteAll/${m}`,{method:"DELETE"}),s([])}};return e(re.Provider,{value:c,children:i.children})}const Q=n.exports.createContext();function Oe(i){const[a,s]=n.exports.useState([]),[o,t]=n.exports.useState([]),c={messages:a,messagesList:o,fetchMessages:async(m,g)=>{try{let w=await fetch(`/rest/conversation/${m}/${g}`);w=await w.json(),s(w)}catch(w){console.log(w)}},fetchMessagesList:async()=>{try{let m=await fetch("/rest/conversation/my-messages");m=await m.json(),t(m)}catch(m){console.log(m)}}};return e(Q.Provider,{value:c,children:i.children})}const ie=n.exports.createContext();function Fe(i){const[a,s]=n.exports.useState([]),o=async()=>{let l=await fetch("rest/API");l=await l.json(),s(l)};n.exports.useEffect(()=>{o()},[]);const t={apis:a,fetchAPIs:o};return e(ie.Provider,{value:t,children:i.children})}const Le=({setCurrentUser:i,callback:a,toggleToast:s,toastLogin:o})=>{const t=O(),[l,d]=n.exports.useState(""),[c,m]=n.exports.useState(""),[g,w]=n.exports.useState(!1);async function b(h){h.preventDefault();const y={email:l,password:c};let N=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)}),u=await N.json();N.status==403&&(console.log("Wrong email/password"),w(!0)),N.status==200&&(i(u),o(p=>!p),s(!0),setTimeout(()=>{s(!1)},2500),a())}return e("div",{className:"min-h-full flex items-center justify-center py-3 px-4 sm:px-6 lg:px-8",children:r("div",{className:"max-w-md w-full space-y-8",children:[e("div",{children:e("h2",{className:"font-myHtext text-myPr-dark text-xl text-center font-bold",children:"Sign in"})}),r("form",{className:"mt-8 space-y-6",onSubmit:b,children:[e("input",{type:"hidden",name:"remember",defaultValue:"true"}),r("div",{className:"rounded-md shadow-sm -space-y-px",children:[r("div",{children:[e("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),e("input",{id:"email-address",name:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none font-myPtext text-xl relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-myGr-dark focus:border-myGr-dark focus:z-10 sm:text-sm",placeholder:"Email address",onChange:h=>{d(h.target.value),w(!1)}})]}),r("div",{children:[e("label",{tabIndex:"2",htmlFor:"password",className:"sr-only",children:"Password"}),e("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none font-myPtext text-xl relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-myGr-dark focus:border-myGr-dark focus:z-10 sm:text-sm",placeholder:"Password",onChange:h=>{m(h.target.value),w(!1)}})]})]}),r("div",{className:"text-xs text-center",children:[g&&e("div",{className:"text-myRe -mt-2 mb-2 font-medium",children:" Bad Credentials "}),e("div",{onClick:()=>{t.push("/registration"),setTimeout(()=>a(),50)},className:"font-medium text-myGr-dark ",children:"Register Account"})]}),e("div",{children:r("button",{className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-myGr-light focus:bg-myGr-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-myGr-dark",children:[e("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:e(xe,{className:"h-5 w-5 text-white","aria-hidden":"true"})}),"Log in"]})})]}),e("a",{name:"About",onClick:h=>{t.push(`/${h.target.name}`),setTimeout(()=>a(),50)},className:"block px-4 py-2 text-base font-medium text-gray-700 text-center",children:" About "})]})})},F=io("http://localhost:9092");F.on("connect",()=>{console.log("socket connected")});F.on("disconnect",function(){console.log("socket disconnected")});F.on("reconnect_attempt",i=>{console.log("Try to reconnect at "+i+" attempt(s).")});function Re(){const i=O(),a=n.exports.useRef(),{currentUser:s,setCurrentUser:o}=n.exports.useContext(M),{notifications:t,setNotifications:l,deleteNotification:d,deleteNotifications:c}=n.exports.useContext(re),[m,g]=n.exports.useState(!1),[w,b]=n.exports.useState(),v=()=>{fetch("/logout"),o(""),i.push("/"),g(!0),b(p=>!p),setTimeout(()=>{g(!1)},2500),b("")},x=p=>{i.push(`/${p.target.name}`)},h=async p=>{await d(p.id),p.messageId?i.push(`/conversation/${p.itemId}/${p.correctUserId||p.userId}`):i.push(`/auction-details/${p.itemId}`)},y=async()=>{await c(t.map(p=>p.id))};F.on("notification",(p,f,S)=>{if(p.userId==s.id){let k=[];for(let j=0;j<t.length;j++)k.push(t[j]);p.title=f,p.correctUserId=S,k.push(p),l(k)}});const N=()=>{a.current.click()},u=["Create","Buying","Selling","Messages","About"];return e(pe,{as:"nav",className:"bg-myPr-light fixed w-screen top-0 z-50",children:r("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-white ",children:[r("div",{className:"relative flex items-center justify-between h-14 ",children:[e("div",{className:"absolute inset-y-0 left-0 flex items-center sm:hidden"}),r("div",{className:"flex-1 flex items-center justify-left sm:items-stretch sm:justify-start ",children:[e("div",{className:"flex-shrink-0 flex items-center",children:e("button",{onClick:x,id:"logo",style:{textShadow:"1px 2px 0px #000000"},className:"font-logo text-3xl block lg:hidden h-8 w-auto ",children:"Kwik"})}),e("div",{className:"hidden sm:block sm:ml-6"})]}),r("div",{className:"absolute inset-y-0 right-0 flex items-center sm:static sm:inset-auto sm:ml-6 sm:pr-0",children:[s&&r(D,{as:"div",className:"ml-3 relative",children:[r("div",{className:"relative",children:[e(D.Button,{children:e(fe,{className:"h-8 w-8 text-white","aria-hidden":"true"})}),t.length>0&&e("span",{className:"text-xs text-center absolute h-4 w-4 rounded-full bg-red-600 left-5",children:t.length})]}),e(D.Items,{className:"font-myHtext fixed bg-gray-700 w-44 right-0 top-16",children:r("div",{children:[t&&t.map(p=>e(D.Item,{onClick:()=>h(p),children:r("div",{className:"bg-white px-2 py-2 text-sm text-gray-700",href:"/myPage",children:[e("div",{className:"font-semibold",children:p==null?void 0:p.title}),e("div",{children:p.messageId?e("span",{className:"text-myGr-dark",children:"New message!"}):p.highestBid?r("span",{className:"text-myRe",children:["New bid: ",p.highestBid," kr"]}):e("span",{className:"text-myRe",children:"New bid!"})})]})},p.id)),t.length>0&&e("div",{className:" bg-white py-2 text-xs text-myPr-dark text-center",onClick:()=>{y()},children:" clear all "})]})})]}),r(D,{as:"div",className:"ml-3 relative",children:[e(D.Button,{className:"flex text-sm rounded-full ",children:e("div",{id:"iconRef",ref:a,children:e(ge,{id:"userCircleIcon",className:"h-11 w-11","aria-hidden":"true"})})}),e(D.Items,{className:"fixed bg-white border-l-2 border-b-2 w-44 right-0 top-14",children:s?r("div",{className:"hola",children:[e(D.Item,{children:r("div",{className:"block px-4 py-3 text-sm font-bold bg-myGr-disabled text-myGr-dark text-center",href:"/myPage",children:["@",s.username]})}),u.map((p,f)=>e(D.Item,{children:r("a",{name:p,onClick:x,className:"block px-4 py-3 text-lg text-gray-700 text-center",children:[" ",p]})},f)),e(D.Item,{children:e("a",{onClick:v,className:"block px-4 py-3 text-white font-semibold text-center",children:e("div",{className:"bg-myGr-light py-1 rounded-md",children:"Log out"})})})]}):e(D.Item,{children:e(Le,{callback:N,setCurrentUser:o,toggleToast:g,toastLogin:b})})})]})]})]}),m&&e(ye,{variant:"filled",severity:"success",style:{backgroundColor:"#6acf9d"},children:w?"You have been LOGGED IN!":"You have been LOGGED OUT!"})]})})}function X({auctionEndTime:i}){const[a]=n.exports.useState(new Date().getTime()),[s,o]=n.exports.useState(+i-a),[t,l]=n.exports.useState(["..."]),d=()=>{let c=[],m=Math.floor(s/(1e3*60*60*24)),g=Math.floor(s/(1e3*60*60)%24),w=Math.floor(s/(1e3*60)%60),b=Math.floor(s/1e3%60);return s<0&&(c=["Auction expired"]),s>1728e5&&(c=[m," days"]),s>864e5&&s<1728e5&&(c=[m," day ",g," hours"]),s>36e5&&s<864e5&&(c=[g," hours ",w," min"]),s>6e4&&s<36e5&&(c=e("span",{className:"text-myRe",children:[w," min ",b," s"]})),s>0&&s<6e4&&(c=[b," s"]),c};return n.exports.useEffect(()=>{if(s<=36e5){const c=setInterval(()=>{o(s-1e3),l(d())},1e3);return()=>clearInterval(c)}else l(d())},[s]),e("div",{children:t})}const Ue=({auction:i})=>{const a=O();return r("div",{onClick:()=>{a.push(`/auction-details/${i.id}`)},className:"h-30 flex bg-white mb-3 p-1 outline-grey",children:[e("div",{className:"picWrapper w-1/2",children:e("img",{className:"h-32 w-32 object-cover",src:`./assets/uploads${i.imagePath}_img1.jpg`,alt:"pic missing"})}),e("div",{className:"h-32 flex "}),r("div",{className:"h-32 p-2 w-full flex flex-col bg-white",children:[e("div",{className:"h-1/2 font-myHtext text-xl col-span-3 align-top leading-tight",children:i.title}),r("div",{className:"w-full flex flex-row justify-evenly ",children:[e("div",{className:"w-1/2 font-myPtext text-myGr-dark font-semibold text-xl text-left mt-2",children:i.highestBid==="0"?`${i.startPrice} kr`:`${i.highestBid} kr`}),e("div",{className:"w-1/2"})]}),r("div",{className:" w-full flex flex-row justify-evenly mt-0",children:[r("div",{className:" w-1/3 font-myPtext text-black text-sm text-left align-text-bottom mt-1",children:[i.numberOfBids," bids"]}),e("div",{className:" w-2/3 font-myPtext font-medium text-sm text-right text-black",children:e(X,{auctionEndTime:i.endTime})})]})]})]})},$e=({filteredAuctionItems:i})=>{const a=i.map(s=>e(Ue,{auction:s},s.id));return e("div",{className:"h-auto  p-2 w-full flex flex-col col-span-1 pt-4",children:a})};function He({handleFilters:i,range:a}){const[s,o]=n.exports.useState([0,2e3]),t=n.exports.useCallback(te(d=>{let c=d[1];c==2e3&&(c=null),i(m=>A(I({},m),{page:0,priceFrom:d[0],priceTo:c}))},500),[]);return e("div",{className:"mt-6",children:e(Y,{sx:{width:200,alignItems:"center"},children:e(be,{max:2010,min:-10,style:{color:"#6ACF9D",thumb:"250px"},step:10,value:s,onChange:(d,c)=>{c[0]<-9||c[1]>2009||(a(m=>A(I({},m),{min:c[0],max:c[1]})),o(c),t(c))},valueLabelDisplay:"off"})})})}const _e=({handleFilters:i})=>{const[a,s]=n.exports.useState({min:0,max:2e3});return r("div",{className:"flex justify-between content-between items-center",children:[e("div",{className:"w-14 text-center mt-4 mr-2 rounded-lg",children:a.min}),e(He,{range:s,handleFilters:i}),e("div",{className:" w-14 text-center mt-4 ml-2 rounded-lg",children:a.max==2e3?`${a.max}+`:a.max})]})},We=({handleFilters:i})=>{const a=n.exports.useCallback(te(o=>{i(t=>A(I({},t),{page:0,search:o}))},500));return e("div",{style:{width:"75%"},children:e(Y,{children:e(ve,{className:"bg-white rounded-md",color:"secondary",fullWidth:!0,label:"Search",onChange:o=>{a(o.target.value)}})})})},ze=({handleFilters:i})=>{const[a,s]=n.exports.useState(0),[o,t]=n.exports.useState(!0);return r("div",{className:"w-full flex flex-col items-center -mt-4",children:[e(We,{handleFilters:i}),e(Y,{sx:{width:"85%",marginTop:"2.5em",bgcolor:"rgba(255,255,255,0.15)",borderRadius:"0.25rem"},children:r(we,{sx:{width:"100%"},value:a,onChange:(d,c)=>{s(c),c!==0?(i(m=>A(I({},m),{page:0,priceFrom:null,priceTo:null,buttonSelection:d.target.name})),t(!1)):(t(!0),i(m=>A(I({},m),{page:0,buttonSelection:d.target.name})))},centered:!0,children:[e(V,{style:{width:"33%",fontSize:"1.3rem",fontWeight:"bold",color:"white",textShadow:"1px 1px 0px #000000"},label:"Price",name:"default"}),e(V,{style:{width:"33%",fontSize:"1.3rem",fontWeight:"bold",color:"white",textShadow:"1px 1px 0px #000000"},label:"Popular",name:"popular"}),e(V,{style:{width:"33%",fontSize:"1.3rem",fontWeight:"bold",color:"white",textShadow:"1px 1px 0px #000000"},label:"Latest",name:"latest"})]})}),o&&e(_e,{handleFilters:i}),e("br",{})]})};var qe="/assets/Shoe.a38254b3.webp",Je="/assets/Dress.e521c5a3.webp",Ye="/assets/Hat.58e03505.webp",Ve="/assets/Shirt.9699d964.webp",Ke="/assets/Accessories.d13f3958.webp",Qe="/assets/Pants.4b181691.webp",Xe="/assets/Shorts.2c9f7e15.webp",Ze="/assets/Jacket.bd2d17f8.webp";const et=({handleFilters:i})=>{const[a,s]=n.exports.useState([{id:1,iconSrc:qe,isActive:!1,name:"Shoes"},{id:4,iconSrc:Ke,isActive:!1,name:"Accessories"},{id:600,iconSrc:Je,isActive:!1,name:"Dresses"},{id:603,iconSrc:Ve,isActive:!1,name:"Shirts"},{id:604,iconSrc:Qe,isActive:!1,name:"Pants"},{id:602,iconSrc:Ye,isActive:!1,name:"Hats"},{id:601,iconSrc:Xe,isActive:!1,name:"Shorts"},{id:605,iconSrc:Ze,isActive:!1,name:"Jackets"}]),o=t=>{let l=[],d=0;a.map(c=>{c.id.toString()===t.target.name?(c.isActive=!c.isActive,i(m=>A(I({},m),{page:0,categoryId:t.target.name}))):c.isActive=!1,l.push(c)}),l.map(c=>{!c.isActive&&d++}),d===8&&i(c=>A(I({},c),{page:0,categoryId:null})),s(l)};return e("div",{className:"catContainer flex justify-between",children:a.map(t=>e("img",{onClick:o,className:`${t.isActive?"border-myPr-light border-2 outline-myPrlight bg-myPr-dark":"bg-myPr-light"} outline-grey font-myPtext font-bold text-white my-2 mx-1 h-16 rounded-full`,name:t.id,src:t.iconSrc,alt:t.name},t.id))})};var tt="/assets/homeTop.39aedcf1.jpeg";const st=()=>{const[i,a]=n.exports.useState(0),{filteredAuctionItems:s,fetchFilteredAuctionItems:o}=n.exports.useContext(_),[t,l]=n.exports.useState({search:null,categoryId:null,priceFrom:null,priceTo:null,buttonSelection:"default",page:i});return n.exports.useEffect(()=>{i!==0&&l(d=>A(I({},d),{page:i}))},[i]),n.exports.useEffect(()=>{t.page==0&&i!=0&&a(0)},[t]),n.exports.useEffect(()=>{const d=setTimeout(()=>{o(t)},500);return()=>{clearTimeout(d)}},[t]),r("div",{className:"bg-myAw",children:[e("div",{className:"h-56 text-center font-logoFont -mt-2 -mb-40",children:e("img",{src:tt,className:"h-full w-full",alt:"background-home-picture"})}),r("div",{className:" flex flex-col place-items-center pt-9 -mt-8",children:[e(ze,{handleFilters:l,class:!0}),e(et,{handleFilters:l}),e($e,{filteredAuctionItems:s}),e("button",{className:"bg-myGr-light my-2 py-2 px-8 text-base text-white rounded focus:bg-myGr-light focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-myGr-dark",onClick:()=>{a(i+1)},children:"Show more"})]})]})};function nt({activateModal:i,id:a,auctionEndTime:s}){const[o,t]=n.exports.useState(!1),[l,d]=n.exports.useState(""),[c,m]=n.exports.useState(""),g=n.exports.useRef(null),{fetchAuctionItem:w}=n.exports.useContext(_),b=async()=>{if(!l||!a)return;let v={itemId:a,bid:l},x=await fetch("/api/bid/placeBid",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(v)});x=await x.json(),x.highestBid?m(x.highestBid):t(!1),await w(a)};return n.exports.useEffect(()=>{t(i!=="init")},[i]),n.exports.useEffect(()=>{o||m("")},[o]),e($.Root,{show:o,as:n.exports.Fragment,className:"top-1/3 fixed",children:e(H,{as:"div",className:"flex justify-center z-10 inset-0 overflow-y-auto",initialFocus:g,onClose:t,children:r("div",{className:"flex items-end justify-center pt-4 px-4 pb-20 text-center",children:[e($.Child,{as:n.exports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e(H.Overlay,{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),e("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200B"}),e($.Child,{as:n.exports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:r("div",{className:"bg-myGr-dark rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[e("div",{className:"bg-myGr-dark px-4 py-4",children:e("div",{className:"text-center",children:r(H.Title,{as:"h3",className:"text-lg font-medium text-white",children:["Time left:"," ",e(X,{auctionEndTime:s})]})})}),r("div",{className:"inputBid bg-myGr-dark px-4 py-4",children:[e("input",{type:"number",className:"w-full text-2xl rounded-md border my-2 py-2 font-medium text-black text-center focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-myGr-dark",onChange:v=>d(v.target.value),value:l,placeholder:"\u20AC"}),e("button",{type:"button",className:"w-full rounded-md border my-2 border-transparent px-20 py-2 bg-myGr-light font-medium text-white focus:bg-myGr-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-myGr-dark",onClick:()=>b(),children:"Place bid"}),c&&r("p",{className:"text-xl font-semibold my-2 text-myAw bg-myRe rounded-md  py-2 text-center",children:["Current price is ",c,"\u20AC"]})]})]})})]})})})}var C={btn:["my-2","py-2","px-8","text-sm","rounded","font-bold",""].join(" "),btnGreen:["bg-myGr-light","text-white","focus:bg-myGr-dark","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-myGr-dark","font-bold",""].join(" "),btnDisabled:i=>[i?"bg-myGr-disabled ":" "],th:["max-h-2","text-sm","font-medium","font-myPtext",""].join(" "),icon:["h-5","w-5","text-black","float-left",""].join(" "),iconText:["font-medium","ml-6",""].join(" "),box:["box-border","w-11/12","bg-myAw","mb-2","px-2","py-2",""].join(" "),input:["w-full","px-2","py-2","mb-8","mt-1","text-primary","border","rounded-md","outline-none","text-sm","transition","duration-150","ease-in-out","focus:ring-myGr-light focus:border-myGr-light",""].join(" ")};const at=()=>{const i=O(),{id:a}=se(),[s,o]=n.exports.useState("init"),{auctionItem:t,fetchAuctionItem:l,userBuyingItems:d,fetchUserBuyingItems:c}=n.exports.useContext(_),{tags:m,fetchTags:g}=n.exports.useContext(ae),{user:w,fetchUser:b,currentUser:v}=n.exports.useContext(M),[x,h]=n.exports.useState("_img1.jpg"),[y,N]=n.exports.useState("_img2.jpg"),[u,p]=n.exports.useState("_img3.jpg"),[f,S]=n.exports.useState(!1),[k,j]=n.exports.useState(!1),L=n.exports.useRef(null);n.exports.useEffect(()=>{F.on("bidUpdate",T=>{T.itemId==a&&l(a)})},[]),n.exports.useEffect(()=>{l(a),g(a)},[a]),n.exports.useEffect(()=>{!v||d.length<1&&c()},[d,v]),n.exports.useEffect(()=>{(t==null?void 0:t.userId)&&(b(t.userId),S(!v||(v==null?void 0:v.id)==(t==null?void 0:t.userId)),j((t==null?void 0:t.endTime)<new Date().getTime())),x==="_img1.jpg"&&t.id&&x==="_img1.jpg"&&t.id&&(document.querySelectorAll(`img[id^="${t.id}"]`).forEach(G=>{G.onerror=()=>{G.remove()}}),L.current.scrollIntoView({behaviour:"smooth"}))},[t==null?void 0:t.userId,v,x]);async function P(T){const G=x[4];return T==2?(h(`_img${y[4]}.jpg`),N(`_img${G}.jpg`)):(h(`_img${u[4]}.jpg`),p(`_img${G}.jpg`))}const U=T=>{f||k?W(T,"Place bid",""):o(!s)},J=T=>{f?W(T,"Chat with seller","You can't chat with yourself",1):i.push(`/conversation/${t.id}/${w.id}`)},W=(T,G,z,oe)=>{k&&!oe?T.target.innerHTML="This item has expired":v?T.target.innerHTML="This is your item...<br>"+z:(T.target.innerHTML="Sign in!",document.getElementById("iconRef").click()),setTimeout(()=>{T.target.innerHTML=G,T.target.blur()},1500)};return r("div",{className:"grid place-items-center gap-5 mb-9",children:[e(nt,{activateModal:s,id:a,auctionEndTime:t.endTime}),e("div",{ref:L}),e("img",{id:`${t.id}-1`,className:"bg-myAw w-full max-h-96 h-96 object-contain p-2 ",src:"/uploads/"+t.imagePath+x}),r("div",{className:" w-full flex flex-row justify-center",children:[e("img",{id:`${t.id}-2`,className:"max-w-14 max-h-14 object-contain px-1 ",src:"/uploads/"+t.imagePath+y,onClick:()=>P(2)}),e("img",{id:`${t.id}-3`,className:"max-w-14 max-h-14 object-contain px-1",src:"/uploads/"+t.imagePath+u,onClick:()=>P(3)})]}),e("div",{className:"text-3xl font-myPtext",children:t.title}),r("div",{className:"flex align-middle w-full text-center mx-4 font-myPtext",children:[r("div",{className:"w-1/3 border-r-2 border-gray-100 text-xl font-bold",children:[e("div",{children:t.numberOfBids>0?"Highest Bid":"Starting price"}),r("div",{className:" text-myGr-dark",children:[t.highestBid,"\u20AC"]})]}),r("div",{className:"w-1/3 border-r-2 border-gray-100 text-xl font-semibold",children:[e("div",{children:"Ends"}),e(X,{auctionEndTime:t.endTime},t.id)]}),r("div",{className:"w-1/3 text-xl font-bold",children:[e("div",{children:"Bids"}),e("div",{children:t.numberOfBids})]})]}),e("div",{className:"w-full text-center px-4 font-myPtext",children:t.winner=="true"?e("div",{className:"bg-myGr-light w-full h-12 flex justify-center items-center font-myHtext text-white",children:"Congratulations you won!"}):e("button",{onClick:T=>U(T),className:"w-3/5 h-14 text-lg "+C.btn+C.btnGreen+C.btnDisabled(f||k),children:"Place bid"})}),r("div",{className:"font-myPtext "+C.box,children:[r("div",{children:[e(Ne,{className:C.icon,"aria-hidden":"true"}),e("div",{className:"font-bold text-xl "+C.iconText,children:"Description"})]}),e("div",{className:"text-xl",children:t.description})]}),e("div",{className:"font-myPtext "+C.box,children:r("div",{children:[e(Se,{className:C.icon,"aria-hidden":"true"}),e("div",{className:"font-myPtext text-xl font-bold "+C.iconText,children:"Tags"}),e("div",{className:"text-xl",children:m.map(T=>`#${T.name} `)})]})}),e("div",{className:"font-myPtext font-bold "+C.box,children:r("div",{className:"flex justify-between items-center",children:[r("div",{className:"",children:[e("span",{children:e(Ce,{className:C.icon,"aria-hidden":"true"})}),e("span",{children:w==null?void 0:w.username})]}),e("button",{onClick:T=>J(T),className:"my-0 "+C.btn+C.btnGreen+C.btnDisabled(f),children:"Chat with seller"})]})})]})},rt=()=>{const{userBuyingItems:i,fetchUserBuyingItems:a}=n.exports.useContext(_),{currentUser:s}=n.exports.useContext(M),[o,t]=n.exports.useState([]),[l,d]=n.exports.useState([]),[c,m]=n.exports.useState([]),[g,w]=n.exports.useState(!0),[b,v]=n.exports.useState(!0),[x,h]=n.exports.useState(!0),y=O(),N=new Date().getTime();return n.exports.useEffect(()=>{!s||a()},[s]),n.exports.useEffect(()=>{let u=[],p=[],f=[];i.map(S=>{S.endTime>N?u.push(S):S.highestBid>S.userBid?f.push(S):p.push(S)}),t(u),d(p),m(f)},[i]),r("div",{className:"bg-myAw h-full pb-20",children:[e("div",{className:"w-full text-center font-myHtext text-4xl py-6",children:"Buying"}),r("div",{className:"font-bold font-myHtext text-xl py-2 mx-3 border-b-4 flex justify-between",children:[e("span",{children:"Currently bidding on"}),r("button",{className:"text-base underline",onClick:()=>w(u=>!u),children:[" ",g?"Hide":"Show"]})]}),g&&o.map(u=>r("div",{className:"bg-white mx-3 my-2 px-2 py-1 border border-solid",onClick:()=>{y.push(`/auction-details/${u.id}`)},children:[e("div",{className:"font-myPtext font-semibold text-myGr-dark text-lg",children:u.title}),r("div",{className:"w-full flex items-center text-base",children:[r("div",{className:"w-4/12 bg-myPr-dark p-1 rounded-sm mr-1 text-center",children:[e("div",{className:"text-myGr-light",children:"Your bid "}),e("div",{className:"text-white",children:u.userBid+" \u20AC"})]}),r("div",{className:"w-4/12 bg-myGr-light p-1 mr-1 rounded-sm text-center",children:[e("div",{className:"text-black",children:"Current "}),e("div",{className:"text-white",children:u.highestBid+" \u20AC"})]}),e("div",{className:"w-5/12 text-right",children:e(it,{className:"text-black",auctionEndTime:u.endTime})},u.id)]})]},u.id)),e("br",{}),r("div",{className:"font-bold font-myHtext text-xl py-2 mx-3 border-b-4 flex justify-between",children:[e("span",{children:"Won Auctions"}),r("button",{className:"text-base underline",onClick:()=>v(u=>!u),children:[" ",b?"Hide":"Show"]})]}),b&&l.map(u=>e("div",{className:"mx-3 my-2 px-2 py-1 bg-myGr-disabled",children:r("div",{className:"flex justify-between items-center text-gray-500",children:[e("div",{className:"font-myPtext whitespace-nowrap overflow-x-hidden font-bold overflow-ellipsis",style:{maxWidth:"150px"},children:u.title}),r("div",{className:"flex items-center ",children:[r("div",{className:"text-xs mr-2",children:[" ",new Date(+u.endTime).toLocaleDateString(),"  "]}),r("div",{className:" bg-myGr-light flex items-center p-px text-left",children:[e("div",{className:"text-xs font-normal px-1 text-black",children:"Price: "}),e("div",{className:"text-white w-18 text-right px-1 font-bold",children:u.highestBid+" \u20AC"})]})]})]})},u.id)),e("br",{}),r("div",{className:"bg-myAwfont-bold font-myHtext text-xl pb-2 mt-4 mx-3 border-b-4 flex justify-between ",children:[e("span",{children:"Lost Auctions"}),r("button",{className:"text-base underline",onClick:()=>h(u=>!u),children:[" ",x?"Hide":"Show"]})]}),x&&c.map(u=>e("div",{className:"mx-3 my-2 px-2 py-1 bg-gray-200",children:r("div",{className:"flex justify-between items-center text-gray-500",children:[e("div",{className:"font-myPtext whitespace-nowrap overflow-x-hidden font-bold overflow-ellipsis",style:{maxWidth:"150px"},children:u.title}),r("div",{className:"flex items-center ",children:[r("div",{className:"text-xs mr-2",children:[" ",new Date(+u.endTime).toLocaleDateString(),"  "]}),r("div",{className:" bg-gray-400 flex items-center p-px text-left",children:[e("div",{className:"text-xs font-normal px-1 text-black",children:"Price: "}),e("div",{className:"text-white w-18 text-right px-1 font-bold",children:u.highestBid+" \u20AC"})]})]})]})},u.id))]})};function it({auctionEndTime:i}){const[a]=n.exports.useState(new Date().getTime()),[s,o]=n.exports.useState(i-a),[t,l]=n.exports.useState(["..."]),d=()=>{let c=[],m=Math.floor(s/(1e3*60*60*24)),g=Math.floor(s/(1e3*60*60)%24),w=Math.floor(s/(1e3*60)%60),b=Math.floor(s/1e3%60);return s<0&&(c=["Auction expired"]),s>1728e5&&(c=[m," days"]),s>864e5&&s<1728e5&&(c=[m," day "]),s>36e5&&s<864e5&&(c=[g," hours"]),s>6e4&&s<36e5&&(c=[w," min ",b," s"]),s>0&&s<6e4&&(c=[b," s"]),c};return n.exports.useEffect(()=>{if(s<=36e5){const c=setInterval(()=>{o(s-1e3),l(d())},1e3);return()=>clearInterval(c)}else l(d())},[s]),e("div",{children:t})}const lt=()=>{const{userSellingItems:i,fetchUserSellingItems:a}=n.exports.useContext(_),{currentUser:s}=n.exports.useContext(M),[o,t]=n.exports.useState([]),[l,d]=n.exports.useState([]),[c,m]=n.exports.useState(!0),[g,w]=n.exports.useState(!0),b=O(),v=new Date().getTime();return n.exports.useEffect(()=>{!s||a()},[s]),n.exports.useEffect(()=>{let x=[],h=[];i.map(y=>{y.endTime>v?x.push(y):h.push(y)}),t(x),d(h)},[i]),r("div",{className:"bg-myAw h-full pb-20",children:[e("div",{className:"w-full text-center font-myHtext text-4xl  py-6",children:"Selling"}),r("div",{className:"font-bold text-xl font-myHtext py-2 mx-3 border-b-4 flex justify-between",children:[e("span",{children:"Currently selling"}),r("button",{className:"text-base underline",onClick:()=>m(x=>!x),children:[" ",c?"Hide":"Show"]})]}),c&&o.map(x=>r("div",{className:"bg-white mx-3 my-2 px-2 py-1 border border-solid",onClick:()=>{b.push(`/auction-details/${x.id}`)},children:[e("div",{className:"font-myPtext text-lg",children:x.title}),r("div",{className:"w-full flex justify-items-start text-xs py-0.5",children:[r("div",{className:"w-3/12 bg-myPr-dark p-px rounded-sm mr-1 text-center",children:[e("span",{className:"text-myGr-light",children:"Bids : "}),e("span",{className:"text-white",children:x.numberOfBids})]}),r("div",{className:"w-4/12 bg-myGr-light p-px mr-1 rounded-sm text-center",children:[e("span",{className:"text-myPr-dark",children:x.numberOfBids>0?"Highest Bid: ":"Start price: "}),e("span",{className:"text-white",children:x.highestBid})]}),e("div",{className:"w-5/12 text-right",children:e(ot,{className:"text-black",auctionEndTime:x.endTime})},x.id)]})]},x.id)),e("br",{}),r("div",{className:"font-bold font-myHtext py-2 mx-3 border-b-4 flex justify-between",children:[e("span",{children:"Passed items"}),r("button",{className:"text-base underline",onClick:()=>w(x=>!x),children:[" ",g?"Hide":"Show"]})]}),g&&l.map(x=>e("div",{className:"mx-3 my-2 px-2 py-1 bg-gray-200",children:r("div",{className:"flex justify-between items-center text-gray-500",children:[e("div",{className:"font-myPtext whitespace-nowrap overflow-x-hidden font-bold overflow-ellipsis",style:{maxWidth:"150px"},children:x.title}),r("div",{className:"flex items-center ",children:[r("div",{className:"text-xs mr-2",children:[" ",new Date(+x.endTime).toLocaleDateString(),"  "]}),r("div",{className:" bg-gray-400 flex items-center p-px text-left",children:[e("div",{className:"text-xs font-normal px-1 text-black",children:"Price: "}),e("div",{className:"text-white w-18 text-right px-1 font-bold",children:x.highestBid+" \u20AC"})]})]})]})},x.id))]})};function ot({auctionEndTime:i}){const[a]=n.exports.useState(new Date().getTime()),[s,o]=n.exports.useState(i-a),[t,l]=n.exports.useState(["..."]),d=()=>{let c=[],m=Math.floor(s/(1e3*60*60*24)),g=Math.floor(s/(1e3*60*60)%24),w=Math.floor(s/(1e3*60)%60),b=Math.floor(s/1e3%60);return s<0&&(c=["Auction expired"]),s>1728e5&&(c=[m," days"]),s>864e5&&s<1728e5&&(c=[m," day "]),s>36e5&&s<864e5&&(c=[g," hours"]),s>6e4&&s<36e5&&(c=[w," min ",b," s"]),s>0&&s<6e4&&(c=[b," s"]),c};return n.exports.useEffect(()=>{if(s<=36e5){const c=setInterval(()=>{o(s-1e3),l(d())},1e3);return()=>clearInterval(c)}else l(d())},[s]),e("div",{children:t})}function ct({callback:i}){const[a,s]=n.exports.useState(K(new Date,1)),o=n.exports.useRef(null),t=l=>{i(d=>A(I({},d),{endTime:l.getTime()})),s(l)};return n.exports.useEffect(()=>{o.current!==null&&(o.current.input.readOnly=!0)},[o]),e(Te,{ref:o,showPopperArrow:!1,selected:a,className:"font-myPtext text-base h-8 "+C.input,onChange:t,minDate:K(new Date,1),maxDate:K(new Date,30),dateFormat:"dd/MM yyyy h:mm",placeholderText:"Select a date",withPortal:!0})}let R=new FormData;const dt=()=>{const i=O(),{currentUser:a}=n.exports.useContext(M),[s,o]=n.exports.useState(!1),[t,l]=n.exports.useState("src/images/upload.png"),[d,c]=n.exports.useState("src/images/upload.png"),[m,g]=n.exports.useState("src/images/upload.png"),[w,b]=n.exports.useState(!1),[v,x]=n.exports.useState({title:"",description:"",category:"",startPrice:0,buyNowPrice:0,endTime:new Date().getTime()+86399e3}),h=[{id:2,name:"Choose",value:""},{id:1,name:"Shoes",value:"Shoes"},{id:4,name:"Accessories",value:"Accessories"},{id:600,name:"Dresses",value:"Dresses"},{id:603,name:"Shirts",value:"Shirts"},{id:604,name:"Pants",value:"Pants"},{id:602,name:"Hats",value:"Hats"},{id:601,name:"Shorts",value:"Shorts"},{id:605,name:"Jackets",value:"Jackets"}],y=async(f,S)=>{if(f.preventDefault(),!a){o(!0);return}let k=v,j="";h.forEach(P=>{if(k.category===P.name){j=P.id;return}});let L={userId:null,description:k.description,title:k.title,endTime:k.endTime,currentBid:0,startPrice:k.startPrice,categoryId:j,imagePath:S,tags:k.tags};try{let P=await fetch("/rest/auctionItem",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(L)});P=await P.json(),i.push(`/auction-details/${P.id}`)}catch{console.log("the new listing was not submitted")}};async function N(f,S){const k=2500,j=1500;try{let L=f.target.files[0],P=new Image;P.src=URL.createObjectURL(L),P.onload=async()=>{let U=document.createElement("canvas"),J=U.getContext("2d");const W=Math.min(k/P.width,j/P.height),T=P.width*W+.5|0,G=P.height*W+.5|0;U.width=T,U.height=G,J.drawImage(P,0,0,T,G);let z=mt(U.toDataURL("image/jpeg",.6));S===1&&(u("_img1.jpg",z),l(P.src)),S===2&&(u("_img2.jpg",z),c(P.src)),S===3&&(u("_img3.jpg",z),g(P.src))}}catch(L){console.error(L)}}function u(f,S){const k=R.getAll("files");R.delete("files"),k.filter(j=>j.name!==f).forEach(j=>R.append("files",j)),R.append("files",S,f)}async function p(f){if(f.preventDefault(),R.getAll("files").length===0)b(!0);else try{(await fetch("/api/upload",{method:"POST",body:R})).json().then(k=>{let j=k.generatedString;j&&y(f,j)}),R.delete("files")}catch{console.error(f)}}return r("div",{children:[e("div",{className:" font-myHtext text-2xl text-center  py-6 bg-myAw",children:"Create a listing"}),r("div",{className:"p-6",children:[e("label",{className:"w-full p-4 flex justify-center font-myPtext font-bold font-block text-base",children:"Upload photos*"}),e("div",{className:"w-full px-4 flex flex-wrap justify-center mt-4",children:r("form",{className:"w-96 flex flex-wrap justify-center",children:[r("div",{className:"w-80 h-48 px-5 grid grid-rows-2 grid-cols-3 gap-x-4 gap-y-4 ",children:[r("div",{className:"image-upload h-48 w-48 row-span-2 col-span-2",children:[e("label",{htmlFor:"image1",children:e("img",{className:"object-contain h-48 w-48",src:t,alt:""})}),e("input",{id:"image1",accept:"image/*",type:"file",onChange:f=>N(f,1)})]}),r("div",{className:" h-20 w-24 image-upload flex flex-wrap justify-center ",children:[e("label",{htmlFor:"image2",children:e("img",{className:"object-contain h-20 ",src:d,alt:""})}),e("input",{accept:"image/*",type:"file",id:"image2",onChange:f=>N(f,2)})]}),r("div",{className:" h-20 w-24 image-upload flex flex-wrap -mt-4 justify-center",children:[e("label",{htmlFor:"image3",children:e("img",{className:"object-contain h-20 ",src:m,alt:""})}),e("input",{accept:"image/*",type:"file",id:"image3",onChange:f=>N(f,3)})]})]}),w&&e("div",{className:"w-full text-center text-sm text-red-600",children:"You must add at least one image"})]})})]}),r("form",{className:"p-6",onSubmit:p,children:[r("div",{className:"",children:[e("label",{htmlFor:"title",className:"font-myPtext font-bold block text-base",children:"Title*"}),e("input",{type:"text",name:"title",id:"title",className:C.input,placeholder:"Title",onChange:f=>{x(S=>A(I({},S),{title:f.target.value}))},required:!0})]}),r("div",{className:"",children:[e("label",{htmlFor:"description",className:"font-myPtext font-bold block text-base",children:"Description"}),e("textarea",{type:"text",name:"description",id:"description",className:"h-20 "+C.input,placeholder:"Description",onChange:f=>{x(S=>A(I({},S),{description:f.target.value}))}})]}),r("div",{className:"",children:[e("label",{htmlFor:"category",className:"font-myPtext font-bold block text-base",children:"Category*"}),e("div",{className:"text-sm",children:e("select",{id:"category",name:"category",className:"pl-0.5 "+C.input,onChange:f=>{x(S=>A(I({},S),{category:f.target.value}))},required:!0,children:h.map(f=>e("option",{value:f.value,children:f.name},f.id))})})]}),r("div",{className:"",children:[e("label",{htmlFor:"starting-price",className:"font-myPtext font-bold block text-base",children:"#Tags"}),e("input",{type:"text",name:"tags",id:"tags",className:C.input,placeholder:'seperate tags with a space (" ")',onChange:f=>{x(S=>A(I({},S),{tags:f.target.value}))}})]}),r("div",{className:"",children:[e("label",{htmlFor:"starting-price",className:"font-myPtext font-bold block text-base",children:"Starting price*"}),e("input",{type:"text",name:"starting-price",id:"starting-price",className:C.input,placeholder:"0",onChange:f=>{x(S=>A(I({},S),{startPrice:f.target.value}))},required:!0})]}),r("div",{className:"",children:[e("label",{htmlFor:"end-date",className:"ml-2 block font-myPtext font-bold text-base",children:"End Date"}),e(ct,{callback:x})]}),e("div",{className:"flex justify-center pt-2 pb-4",children:e("button",{type:"submit",className:"group relative w-1/2 flex justify-center py-2 px-4 border border-transparent text-base font-medium rounded-md text-white bg-myPr-dark hover:bg-myPr-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Done"})}),s&&e("div",{className:"text-center text-myRe text-xs p-1",children:"Sir, you need to login first"})]})]})};function mt(i){let a=atob(i.split(",")[1]),s=i.split(",")[0].split(":")[1].split(";")[0],o=new ArrayBuffer(a.length),t=new Uint8Array(o);for(let d=0;d<a.length;d++)t[d]=a.charCodeAt(d);return new Blob([o],{type:s})}const ut=()=>e("div",{className:"bg-gray-700 h-screen",children:e("div",{className:"text-yellow-500 text-4xl text-center",children:"404"})}),ht=n.exports.createContext();function xt(i){const[a,s]=n.exports.useState([]),o=async()=>{let l=await fetch("/rest/auctionItem");try{l=await l.json(),l&&s(l)}catch{}};n.exports.useEffect(()=>{o()},[]);const t={auctions:a,fetchAuctions:o};return e(ht.Provider,{value:t,children:i.children})}const le="w-full px-2 py-2 mb-8 text-primary border rounded-md outline-none text-sm transition duration-150 ease-in-out ",pt=({callback:i})=>{const[a,s]=n.exports.useState(!1),o=d=>{i({orgName:d.target.value})},t=d=>{i({orgNr:d.target.value})},l=d=>{s(!a),i({role:d.target.name})};return r(ne,{children:[r("div",{className:"flex justify-evenly w-full px-16 mt-8 my-8",children:[r("div",{className:"px-2 flex content-start",children:[e("div",{children:"Personal "}),e("div",{className:"px-2 flex content-justify",children:e("input",{type:"radio",name:"private",checked:!a,onChange:l})})]}),r("div",{className:"px-2 flex content-justify",children:[e("div",{children:"Organization "}),e("div",{className:"px-2 flex content-justify",children:e("input",{type:"radio",name:"organization",checked:a,onChange:l})})]})]}),a&&r(ne,{children:[r("div",{className:"w-full",children:[e("label",{children:"Organization name "}),e("input",{className:le,type:"org-name",placeholder:"Organization name",onChange:o,required:!0})]}),r("div",{className:"w-full",children:[e("label",{children:"Organization number "}),e("input",{className:le,type:"org-nr",placeholder:"Organization number",onChange:t,required:!0})]})]})]})},ft="flex flex-col justify-center items-center px-8",q="font-myPtext text-lg w-full",gt="font-myHtext font-bold text-2xl items-center p-4 mt-8 ",yt=()=>{const{setCurrentUser:i}=n.exports.useContext(M),a=O(),[s,o]=n.exports.useState(!1),[t,l]=n.exports.useState({userName:"",email:"",pass1:"",pass2:"",role:"private"}),d=b=>{l(I(I({},t),b))},c=()=>!t.pass2||!t.pass1||t.pass1!==t.pass2,m=()=>t.pass2.length>1&&c(),g=b=>{l(v=>A(I({},v),{email:b.target.value})),o(!1)};return e("div",{children:r("form",{className:ft,onSubmit:async b=>{if(b.preventDefault(),!c()){let v=t,x={username:v.userName,email:v.email,password:v.pass2,role:v.role,orgName:v.orgName,orgNr:v.orgNr};try{let h=await fetch("/api/register",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(x)});h=await h.json();let y={email:x.email,password:x.password};try{let N=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});N=await N.json(),i(N)}catch(N){console.log(N)}a.goBack()}catch(h){console.log("probably email is already taken",h),o(!0)}}},children:[e("div",{className:gt,children:"Register new account"}),r("div",{className:q,children:[e("label",{children:"Username "}),e("input",{className:C.input,type:"username",placeholder:"Your username",onChange:b=>{l(v=>A(I({},v),{userName:b.target.value}))},required:!0})]}),r("div",{className:q,children:[e("label",{children:"Email "}),e("input",{className:C.input,type:"email",placeholder:"Your email address",onChange:g,required:!0})]}),r("div",{className:q,children:[e("label",{children:"Password"}),e("input",{className:C.input,type:"password",placeholder:"Your Password",onChange:b=>{l(v=>A(I({},v),{pass1:b.target.value}))},required:!0})]}),r("div",{className:q,children:[e("label",{children:"Confirm Password"}),e("input",{className:C.input,type:"password",placeholder:"Confirm Password",onChange:b=>{l(v=>A(I({},v),{pass2:b.target.value}))},required:!0}),m()?e("div",{style:{color:"red",textAlign:"center"},children:"Passwords don't match"}):e("div",{style:{color:"transparent"},children:'""'}),s&&e("div",{style:{textAlign:"center",color:"red"},children:"Bad Credentials"})]}),r("div",{className:q,children:[e("label",{children:"Account type "}),e("div",{className:"flex flex-wrap content-center",children:e(pt,{callback:d})})]}),e("div",{className:"flex justify-center items-center pb-8",children:e("button",{type:"submit",className:C.btn+C.btnGreen,children:"Create Account"})}),e("div",{className:"min-h-200",children:"\xA0"})]})})},bt=()=>r("div",{children:[e("div",{className:"relative bg-homebg bg-cover h-48 w-full text-center ",children:e("div",{className:"absolute inset-x-0 font-bold text-6xl font-myHtext text-white pt-16",children:"About us"})}),r("div",{className:"w-full px-2 flex-col flex items-center",children:[e("br",{}),e("div",{className:"font-myPtext text-2xl text-black font-medium px-6",children:"Selling clothes in a sustainable way since October 2021. We care about a green planet, that's why we made our service free."}),e("br",{}),e("a",{className:"font-myPtext text-lg font-medium text-myPr-dark fixed bottom-24 px-2 underline",href:"mailto:nope@haha.se",children:"Contact us"}),e("div",{className:"font-myPtext text-sm fixed bottom-2",children:"Copyright 2021"})]})]}),vt=()=>{var N;const{itemId:i,userId:a}=se(),{messages:s,fetchMessages:o}=n.exports.useContext(Q),{currentUser:t}=n.exports.useContext(M),[l,d]=n.exports.useState(""),[c,m]=n.exports.useState(""),g=n.exports.useRef(null),w=O(),b=()=>{w.push(`/auction-details/${i}`)};n.exports.useEffect(()=>{i&&a&&o(i,a)},[i,a]);const v=()=>{var u;(u=g.current)==null||u.scrollIntoView({behavior:"smooth"})};n.exports.useEffect(()=>{v()},[s]);const x=async u=>{u.preventDefault();let p={senderId:null,receiverId:a,messageContent:c||l,timestamp:null,itemId:i},f=await fetch("/rest/conversation",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(p)});f=await f.json(),f.status==500?(document.getElementById("inputMsg").placeholder="Resending...",m(p.messageContent),setTimeout(()=>x(u),500)):(document.getElementById("inputMsg").placeholder="Type here...",m("")),d("")},h=n.exports.useCallback(()=>{o(i,a)},[i,a]);n.exports.useEffect(async()=>{let u=await fetch("/api/whoami");return u=await u.json(),F.on("messageUp",p=>{if((u.id==p.senderId||u.id==p.receiverId)&&p.itemId==i)try{h()}catch(f){console.log("error in conversation",f)}}),()=>{F.disconnect()}},[]);const y=u=>{d(u.target.value)};return window.onbeforeunload=function(){window.scrollTo(0,0)},r("div",{children:[r("div",{className:"topCard z-10 w-full  bg-myAw fixed border-b-2 border-myGr-dark",children:[r("div",{className:"text-xl flex items-center justify-around py-2 text-center font-bold ",children:[e(Pe,{onClick:()=>{w.push("/Messages")},className:"h-9 w-9 mb-1 text-myPr-dark "}),r("div",{onClick:b,children:[" ",s.title]})]}),e("div",{children:r("div",{className:"what text-sm font-bold px-9 ",children:[" Chatting with: ",e("span",{className:"text-myPr-dark",children:s.username})]})})]}),e("div",{className:"mb-16 pt-20",children:(N=s.messages)==null?void 0:N.map(u=>r("div",{className:" m-2 p-1 rounded-lg w-7/12",style:t.id==u.receiverId?{textAlign:"left"}:{textAlign:"right",marginLeft:"38%"},children:[r("div",{className:"text-xs opacity-50",children:["  ",new Date(u.timestamp).toLocaleTimeString()," "]}),e("div",{className:"break-words",style:t.id==u.receiverId?{backgroundColor:"wheat",padding:"10px",borderRadius:"18px 18px 18px 0px"}:{backgroundColor:"#6acf9d",padding:"10px",borderRadius:"18px 18px 0px 18px"},children:u.messageContent})]},`${u.id}-${t==null?void 0:t.id}`))}),e("div",{ref:g}),r("form",{className:"w-full fixed bottom-0 flex flex-row",onSubmit:x,children:[e("input",{required:!0,id:"inputMsg",className:"z-20 border-4 w-10/12 text-left",type:"text",placeholder:"Type here...",value:l,onChange:y}),e("button",{className:"w-2/12 py-2 bg-myGr-light z-20",type:"submit",name:"send",children:"send"})]})]})},wt=()=>{const i=O(),{messagesList:a,fetchMessagesList:s}=n.exports.useContext(Q),{currentUser:o}=n.exports.useContext(M);n.exports.useEffect(()=>{s()},[]);const t=l=>{o.id!=l.senderId?i.push(`/conversation/${l.itemId}/${l.senderId}`):i.push(`/conversation/${l.itemId}/${l.receiverId}`)};return n.exports.useEffect(async()=>{let l=await fetch("/api/whoami");return l=await l.json(),F.on("messageUp",d=>{if(l.id==d.receiverId)try{s()}catch(c){console.log("error in messages",c)}}),()=>{F.disconnect()}},[]),r("div",{className:"bg-myAw h-screen",children:[e("div",{className:"font-myHtext text-center font-bold text-2xl py-5 text-black",children:"Messages"}),a==null?void 0:a.map(l=>e("div",{className:"border mx-3 my-2 text-sm bg-white",onClick:()=>{t(l)},children:r("div",{className:"flex w-full items-center",children:[e("div",{className:"p-1",children:e("img",{className:"h-24 w-24 object-cover",src:"/uploads/"+l.imagePath+"_img1.jpg",alt:"Item Picture"})}),r("div",{style:{width:"80%"},children:[e("div",{className:"text-xs text-gray-400 mr-1 text-right",children:new Date(l.timestamp).toLocaleDateString()}),r("div",{className:"font-myHtext text-lg text-myGr-dark font-bold",children:["@",l.username]}),e("div",{className:"font-myPtext text-base whitespace-nowrap overflow-x-hidden font-bold overflow-ellipsis",style:{maxWidth:"230px"},children:l.title}),e("div",{className:"font-myPtext text-lg whitespace-nowrap overflow-x-hidden overflow-ellipsis text-gray-400",style:{maxWidth:"230px"},children:l.messageContent})]})]})},l.id))]})};var B={h1:["text-3xl","mx-1 "].join(" "),card:["flex","py-1","px-1","my-1","mx-1","text-black","border-2","bg-opacity-50 "].join(" "),getCard:["border-myPr-dark","bg-myPr-light "].join(" "),postCard:["border-myGr-dark","bg-myGr-light "].join(" "),deleteCard:["border-myRe","bg-myRe "].join(" "),method:["text-center","text-2xl","text-white","py-1","px-1","w-3/12 "].join(" "),getMethod:["bg-myPr-dark "],postMethod:["bg-myGr-dark "],deleteMethod:["bg-myRe "],url:["my-auto","ml-2","text-base "].join(" ")};const Nt=({gets:i,activateModal:a,mauro:s})=>{const o=t=>{s(t),a(l=>!l)};return e("div",{children:e("div",{children:i.map(t=>r("div",{className:B.card+B.getCard,onClick:()=>o(t),children:[e("div",{className:B.method+B.getMethod,children:t.method}),e("div",{className:B.url,children:t.url})]},t.id))})})},St=({posts:i,activateModal:a,mauro:s})=>{const o=t=>{s(t),a(l=>!l)};return e("div",{children:e("div",{children:i.map(t=>r("div",{className:B.card+B.postCard,onClick:()=>o(t),children:[e("div",{className:B.method+B.postMethod,children:t.method}),e("div",{className:B.url,children:t.url})]},t.id))})})},Ct=({deletes:i,activateModal:a,mauro:s})=>{const o=t=>{s(t),a(l=>!l)};return e("div",{children:e("div",{children:i.map(t=>r("div",{className:B.card+B.deleteCard,onClick:()=>o(t),children:[e("div",{className:B.method+B.deleteMethod,children:t.method}),e("div",{className:B.url,children:t.url})]},t.id))})})},Tt=({list:i,activateModal:a,mauro:s})=>r("div",{children:[e("div",{children:e(Nt,{mauro:s,gets:i.filter(o=>o.method==="GET"),activateModal:a})}),e("div",{children:e(St,{mauro:s,posts:i.filter(o=>o.method==="POST"),activateModal:a})}),e("div",{children:e(Ct,{mauro:s,deletes:i.filter(o=>o.method==="DELETE"),activateModal:a})})]});function Pt({activateModal:i,api:a}){const[s,o]=n.exports.useState(!1),t=n.exports.useRef(null),[l,d]=n.exports.useState([]),[c,m]=n.exports.useState("");n.exports.useEffect(()=>{d([]),o(i!=="init"),a.method==="GET"&&g(),a.method==="POST"&&m(a.template.replaceAll("\\n",`
`))},[i]);const g=()=>{let h=[],y=a.url;for(;y;){let N=y.indexOf("{")+1,u=y.indexOf("}");N?(h.push({name:y.substring(N,u)}),y=y.substring(u+1)):y=""}d(h)},w=()=>{a.method==="GET"?b():a.method==="POST"&&v(),o(!1)},b=async()=>{var h=document.querySelectorAll(`input[id^="${a.url}"]`);let y=x(h),N=await fetch(y);N.status===200?(N=await N.json(),document.getElementById("API-response").value=JSON.stringify(N,void 0,4)):document.getElementById("API-response").value=N.status},v=async()=>{var h=document.getElementById("API-textarea");let y=await fetch(a.url,{method:"POST",headers:{"Content-Type":"application/json"},body:h.value});y.status===200?(y=await y.json(),document.getElementById("API-response").value=JSON.stringify(y,void 0,4)):document.getElementById("API-response").value=y.status},x=h=>{var y=/\{(.*?)\}/,N=a.url;for(let p=0;p<h.length;p++){var u=y.exec(N)[0];N=N.replace(u,h[p].value)}return N};return e($.Root,{show:s,as:n.exports.Fragment,className:"top-1/3 fixed w-full",children:e(H,{as:"div",className:"flex justify-center z-10 inset-0 overflow-y-auto",initialFocus:t,onClose:o,children:r("div",{className:"flex items-end justify-center pt-4 px-4 pb-20 text-center",children:[e($.Child,{as:n.exports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e(H.Overlay,{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),e("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200B"}),e($.Child,{as:n.exports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:r("div",{className:"inline-block align-bottom bg-myGr-dark rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[e("div",{className:"bg-myGr-dark px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:r("div",{className:"text-xs text-white text-center",children:[e("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:e(H.Title,{as:"h3",className:"text-lg leading-6 font-medium text-white",children:a.url})}),a.method==="GET"&&a.template]})}),r("div",{className:"bg-myGr-dark px-4 py-3",children:[l.map(h=>e("input",{id:`${a.url}-${h.name}`,type:"text",className:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-2 py-2 my-1 bg-white text-base font-medium text-black text-center",placeholder:h.name},`${a.url}-${h.name}`)),a.method==="POST"&&e("textarea",{id:"API-textarea",className:"w-full h-40 inline-flex justify-center rounded-md border border-gray-300 shadow-sm my-1 bg-white text-base font-medium text-black",value:c,onChange:h=>m(h.target.value)}),e("button",{type:"button",className:"mt-5 w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-20 py-2 bg-myGr-light text-base font-medium text-white focus:bg-myGr-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-myGr-dark",onClick:()=>w(),children:"Execute"})]})]})})]})})})}const It=()=>{var d;const{apis:i}=n.exports.useContext(ie),{currentUser:a}=n.exports.useContext(M),[s,o]=n.exports.useState({entity:"",method:"",url:"",template:""}),[t,l]=n.exports.useState("init");return r("div",{children:[a&&e(Pt,{activateModal:t,api:s}),(d=i==null?void 0:i.entities)==null?void 0:d.map(c=>r("div",{children:[e("div",{className:B.h1,children:c}),e("div",{children:e(Tt,{mauro:o,list:i.apis.filter(m=>m.entity===c),activateModal:l})})]},c)),e("textarea",{id:"API-response",className:"w-full h-40 inline-flex justify-center rounded-md border border-gray-300 shadow-sm my-1 bg-white text-base font-medium text-black"})]})};function kt(){return e("div",{className:"mt-14",children:e(Fe,{children:e(Me,{children:e(Ge,{children:e(Oe,{children:e(xt,{children:e(De,{children:e(Ee,{children:r(Ie,{children:[e(Re,{}),r(ke,{children:[e(E,{exact:!0,path:"/",component:st}),e(E,{exact:!0,path:"/auction-details/:id",component:at}),e(E,{exact:!0,path:"/registration",component:yt}),e(E,{exact:!0,path:"/Buying",component:rt}),e(E,{exact:!0,path:"/Messages",component:wt}),e(E,{exact:!0,path:"/conversation/:itemId/:userId",component:vt}),e(E,{exact:!0,path:"/Selling",component:lt}),e(E,{exact:!0,path:"/Create",component:dt}),e(E,{exact:!0,path:"/About",component:bt}),e(E,{exact:!0,path:"/API",component:It}),e(E,{path:"*",component:ut})]})]})})})})})})})})})}Ae.render(e(je.StrictMode,{children:e(kt,{})}),document.getElementById("root"));
